<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="css/output.css" rel="stylesheet" />
  <title>DATOS</title>
  <style>
    /* Paleta personalizada (tonos más suaves) */
    :root{
        --verde-oscuro:#32a641; /* dark green */
        --verde-claro:#9CCF9B;  /* light green */
        --cafe:#6B3E2A; /* coffee brown */
        --crema:#F7F1E6; /* cream */
    }
    /* Fondo general suave en degradado verde pastel */
    body{ background: linear-gradient(180deg, var(--verde-claro) 0%, #f8fff9 100%); }
    /* Forzar títulos y todos los datos en negro (más específico para sobrescribir utilidades) */
    h1, h2, h3, h4, h5, h6,
    th, td,
    main, main * {
      color: #000 !important;
    }
    /* Navbar: solo los elementos de navegación en negro (sin tocar el botón de cerrar sesión) */
    header .nav-text, header .nav-text * {
      color: #000 !important;
      fill: #000 !important;
    }
    header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 1000; /* Aseguramos que el navbar esté encima */
      background-color: var(--verde-oscuro);
      backdrop-filter: blur(10px); /* Aplica un filtro de desenfoque al fondo */
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); /* Sombra suave para resaltar el navbar */
    }
  </style>
  <!-- Agregar jsPDF y autoTable -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>


  <!-- Navbar -->
  <header class="w-full fixed top-0 left-0 py-5 bg-[color:var(--verde-oscuro)]/80 backdrop-blur-xl shadow-md border-b border-[color:var(--verde-claro)] z-20">
    <nav class="max-w-7xl mx-auto px-8 flex justify-between items-center">
      <!-- Logo -->
      <div class="flex items-center space-x-2">
        <span class="text-3xl text-green-600">🌿</span>
        <h1 class="text-2xl font-bold tracking-wide text-[color:var(--crema)]">AgroPH</h1>
      </div>

      <!-- Menú de navegación -->
      <ul class="hidden md:flex space-x-6 font-medium text-[color:var(--crema)]">
        <li><a href="datos.html" class="hover:text-[color:var(--verde-claro)] transition">Datos</a></li>
        <li><a href="historial.html" class="hover:text-[color:var(--verde-claro)] transition">Historial</a></li>
        <li><a href="sugerencia.html" class="hover:text-[color:var(--verde-claro)] transition">Sugerencia</a></li>
      </ul>

      <!-- Botón cerrar sesión -->
      <div class="flex items-center gap-3">
        <button
          type="button"
          onclick="window.location.href='sesion.html'"
          class="w-full bg-gradient-to-r from-green-600 to-green-500 text-white py-2.5 rounded-xl font-semibold shadow-md hover:shadow-lg hover:from-green-700 hover:to-green-600 transition-all"
        >
          Cerrar sesión
        </button>

        <!-- Botón menú móvil -->
        <button id="menuBtn" 
                class="md:hidden p-4 rounded-lg bg-green-100 hover:bg-green-200 transition">
          <svg xmlns="http://www.w3.org/2000/svg" 
               class="h-10 w-10 text-green-700" 
               fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                  d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
      </div>
    </nav>
  </header>

  <!-- Contenido principal -->
  <main class="pt-28 px-6 max-w-6xl mx-auto">
    <section class="bg-[color:var(--crema)] rounded-2xl shadow-lg p-8 relative">
      <h2 class="text-3xl font-bold text-[color:var(--verde-oscuro)] text-center mb-3">Información de los Sensores</h2>
      <p class="text-center text-gray-600 mb-6">
        En esta sección se presentan los últimos <span class="font-semibold">10 registros del mes</span>,
        con datos detallados sobre la <span class="text-[color:var(--verde-oscuro)] font-medium">humedad</span>,
        <span class="text-[color:var(--verde-oscuro)] font-medium">temperatura</span> y <span class="text-[color:var(--verde-oscuro)] font-medium">nivel de pH</span>.
      </p>
      <p class="text-center text-gray-500 italic mb-6">
        Esta información es clave para el análisis y monitoreo de las condiciones ambientales del cultivo.
      </p>


      <!-- Tabla -->
      <div class="overflow-x-auto mt-20">
        <table class="w-full border border-[color:var(--verde-claro)] border-collapse text-sm">
          <thead class="bg-[color:var(--verde-oscuro)]/80 text-black text-sm uppercase tracking-wide">
            <tr>
               <th class="border border-[color:var(--verde-claro)] px-4 py-3 text-left">Fecha</th>
               <th class="border border-[color:var(--verde-claro)] px-4 py-3 text-left">Humedad (%)</th>
               <th class="border border-[color:var(--verde-claro)] px-4 py-3 text-left">Temperatura (°C)</th>
               <th class="border border-[color:var(--verde-claro)] px-4 py-3 text-left">pH</th>
            </tr>
          </thead>

          <tbody class="bg-white">
            <tr class="hover:bg-green-50 transition">
            <td class="border border-[color:var(--verde-claro)] px-4 py-2">2025-10-18 11:15:20</td>
            <td class="border border-[color:var(--verde-claro)] px-4 py-2">78</td>
            <td class="border border-[color:var(--verde-claro)] px-4 py-2">25.0</td>
            <td class="border border-[color:var(--verde-claro)] px-4 py-2">6.2</td>
           </tr>
         <tr class="hover:bg-green-50 transition">
            <td class="border border-[color:var(--verde-claro)] px-4 py-2">2025-10-17 08:45:11</td>
            <td class="border border-[color:var(--verde-claro)] px-4 py-2">69</td>
            <td class="border border-[color:var(--verde-claro)] px-4 py-2">27.1</td>
             <td class="border border-[color:var(--verde-claro)] px-4 py-2">6.4</td>
          </tr>
          <tr class="hover:bg-green-50 transition">
            <td class="border border-[color:var(--verde-claro)] px-4 py-2">2025-10-16 14:30:45</td>
            <td class="border border-[color:var(--verde-claro)] px-4 py-2">76</td>
            <td class="border border-[color:var(--verde-claro)] px-4 py-2">24.3</td>
            <td class="border border-[color:var(--verde-claro)] px-4 py-2">6.0</td>
         </tr>
         <tr class="hover:bg-green-50 transition">
            <td class="border border-[color:var(--verde-claro)] px-4 py-2">2025-10-15 09:12:33</td>
            <td class="border border-[color:var(--verde-claro)] px-4 py-2">82</td>
            <td class="border border-[color:var(--verde-claro)] px-4 py-2">23.8</td>
            <td class="border border-[color:var(--verde-claro)] px-4 py-2">5.8</td>
          </tr>
          <tr class="hover:bg-green-50 transition">
           <td class="border border-[color:var(--verde-claro)] px-4 py-2">2025-10-14 16:50:07</td>
           <td class="border border-[color:var(--verde-claro)] px-4 py-2">70</td>
           <td class="border border-[color:var(--verde-claro)] px-4 py-2">22.7</td>
           <td class="border border-[color:var(--verde-claro)] px-4 py-2">6.3</td>
          </tr>
          <tr class="hover:bg-green-50 transition">
             <td class="border border-[color:var(--verde-claro)] px-4 py-2">2025-10-13 13:18:56</td>
             <td class="border border-[color:var(--verde-claro)] px-4 py-2">73</td>
             <td class="border border-[color:var(--verde-claro)] px-4 py-2">25.2</td>
             <td class="border border-[color:var(--verde-claro)] px-4 py-2">6.1</td>
         </tr>
           <tr class="hover:bg-green-50 transition">
             <td class="border border-[color:var(--verde-claro)] px-4 py-2">2025-10-12 11:03:44</td>
             <td class="border border-[color:var(--verde-claro)] px-4 py-2">79</td>
             <td class="border border-[color:var(--verde-claro)] px-4 py-2">24.1</td>
             <td class="border border-[color:var(--verde-claro)] px-4 py-2">6.5</td>
           </tr>

            <tr class="hover:bg-green-50 transition">
              <td class="border border-[color:var(--verde-claro)] px-4 py-2">2025-10-28 14:30:05</td>
              <td class="border border-[color:var(--verde-claro)] px-4 py-2">74</td>
              <td class="border border-[color:var(--verde-claro)] px-4 py-2">24.8</td>
              <td class="border border-[color:var(--verde-claro)] px-4 py-2">6.1</td>
            </tr>
            <tr class="hover:bg-green-50 transition">
              <td class="border border-[color:var(--verde-claro)] px-4 py-2">2025-10-27 09:45:22</td>
              <td class="border border-[color:var(--verde-claro)] px-4 py-2">68</td>
              <td class="border border-[color:var(--verde-claro)] px-4 py-2">26.4</td>
              <td class="border border-[color:var(--verde-claro)] px-4 py-2">6.3</td>
            </tr>
            <tr class="hover:bg-green-50 transition">
              <td class="border border-[color:var(--verde-claro)] px-4 py-2">2025-10-26 17:15:43</td>
              <td class="border border-[color:var(--verde-claro)] px-4 py-2">72</td>
              <td class="border border-[color:var(--verde-claro)] px-4 py-2">25.6</td>
              <td class="border border-[color:var(--verde-claro)] px-4 py-2">6.0</td>
            </tr>
            <tr class="hover:bg-green-50 transition">
              <td class="border border-[color:var(--verde-claro)] px-4 py-2">2025-10-25 10:22:59</td>
              <td class="border border-[color:var(--verde-claro)] px-4 py-2">80</td>
              <td class="border border-[color:var(--verde-claro)] px-4 py-2">23.2</td>
              <td class="border border-[color:var(--verde-claro)] px-4 py-2">6.5</td>
            </tr>
            
            <!-- Aquí se continúan los registros -->
          </tbody>
        </table>
      </div>

        <!-- Botón Descargar PDF -->
         <div class="flex justify-center mt-6">
        <button id="descargarPDF" class="bg-[color:var(--verde-oscuro)]/80 text-[color:var(--crema)] py-2 px-4 rounded-xl shadow-md flex items-center space-x-2"
        onclick="descargarPDF()">
        <span>📄</span>
        <span>Descargar PDF</span>
       </button>
      </div>
      
    </section>
  </main>

  <!-- Pie de página -->
  <footer class="mt-10 py-6 text-center text-gray-600 text-sm">
    © 2025 AgroPH — Monitoreo Inteligente del Cultivo de Café
  </footer>

  <!-- Script para cerrar sesión -->
  <script>
    function cerrarSesion() {
      alert("Sesión cerrada correctamente.");
      window.location.href = "index.html"; // redirige al login
    }
  </script>

  <script>
  function descargarPDF() {
    const { jsPDF } = window.jspdf; // Cargar la librería jsPDF
    const doc = new jsPDF(); // Crear un nuevo documento PDF

    // Obtener las filas de la tabla
    const filas = document.querySelectorAll('table tbody tr');
    
    // Crear un array para los datos
    let tablaDatos = [];

    // Iterar sobre las filas de la tabla y extraer los datos
    filas.forEach(fila => {
      const celdas = fila.querySelectorAll('td');
      const filaDatos = [];
      celdas.forEach(celda => {
        filaDatos.push(celda.textContent); // Extraer el texto de cada celda
      });
      tablaDatos.push(filaDatos); // Añadir la fila de datos al array
    });

    // Generar la tabla en el PDF
    doc.autoTable({
      head: [['Fecha', 'Humedad (%)', 'Temperatura (°C)', 'pH']], // Encabezado de la tabla
      body: tablaDatos, // Los datos extraídos de las filas de la tabla
    });

    // Guardar el PDF con el nombre especificado
    doc.save('Información_de_los_Sensores.pdf');
  }
</script>

</body>
</html>
